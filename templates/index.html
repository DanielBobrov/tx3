{% extends "base.html" %}
{% from "components/macros.html" import render_player_button, game_card %}
{% block title %}{{ _('common.site_title') }} — {{ _('common.site_tagline') }}{% endblock %}
{% block content %}
  <link rel="stylesheet" href="/static/css/index.css">

    <section class="hero">
        <div class="hero-left">
            <h1>{{ _('common.site_tagline') }}</h1>
            {#    <p class="muted">Мгновенные партии, режимы, рейтинги и наблюдение за матчами в реальном времени.</p>#}
            <div class="cta-row">
                {#      <a href="/quickplay" class="btn primary">Играть с соперником</a>#}
                {% include "components/create_game.html" %}
                {#      <a href="/vs-bot" class="btn ghost">Против компьютера</a>#}
            </div>
        </div>
        {#  <div class="hero-right">#}
        {#    <!-- Место под мини-виджеты, баннеры, новости -->#}
        {#    <div class="panel">#}
        {#      <h3>Пазл дня</h3>#}
        {#      <div class="muted">Сервер подставит FEN и решение</div>#}
        {#      <div class="puzzle-fen">{{ puzzle.fen if puzzle else '...' }}</div>#}
        {#      <a href="/puzzles/daily" class="btn small">Решить</a>#}
        {#    </div>#}
        {#  </div>#}
    </section>

    <section class="grid two">
        <div class="panel">
            <div class="panel-head">
                <h3>{{ _('main_screen.can_join') }}</h3>
                <a class="link" href="/all_games">{{ _('main_screen.all_games') }}</a>
            </div>
            <div class="games">
                {% for game in last_games or [] %}
                    {{ game_card(game, players) }}
                {% else %}
                    <div class="tr empty">
                        <div class="muted">{{ _('main_screen.no_waiting_games') }}</div>
                    </div>
                {% endfor %}
            </div>
        </div>


        <div class="panel">
            <div class="panel-head">
                <h3>{{ _('main_screen.my_games') }}</h3>
                <a class="link" href="/all_games">{{ _('main_screen.all_games') }}</a>
            </div>
            <div class="games">
                {% for game in player_games or [] %}
                    {{ game_card(game, players) }}
                {% else %}
                    <div class="tr empty">
                        <div class="muted">{{ _('No games waiting for a second player. Create your own!') }}</div>
                    </div>
                {% endfor %}
            </div>
        </div>

        {#  <div class="panel">#}
        {#    <div class="panel-head">#}
        {#      <h3>Живые партии</h3>#}
        {#      <a class="link" href="/watch">Смотреть все</a>#}
        {#    </div>#}
        {#    <div class="live-list">#}
        {#      {% for g in live_games or [] %}#}
        {#        <a class="live-item" href="/game/{{ g.id }}">#}
        {#          <div class="players">#}
        {#            <span>{{ g.white.username }} ({{ g.white.rating }})</span>#}
        {#            <span class="muted">vs</span>#}
        {#            <span>{{ g.black.username }} ({{ g.black.rating }})</span>#}
        {#          </div>#}
        {#          <div class="muted">{{ g.time }}+{{ g.increment }} • {{ g.status|default('Идёт') }}</div>#}
        {#        </a>#}
        {#      {% else %}#}
        {#        <div class="muted">Пока пусто. Станьте первым!</div>#}
        {#      {% endfor %}#}
        {#    </div>#}
        {#  </div>#}
    </section>
    <script src="/static/js/notifications.js"></script>
{% endblock %}
{% block scripts %}
{% endblock %}